"use strict";var logUpdate=require("log-update"),activeProcesses=[],externalLogger=console.log,newProcess=function(e,o){var s=new Process(e,o);return activeProcesses.push(s),s},maskLogs=function(){console.log=newLogger},unmaskLogs=function(){console.log=externalLogger},newLogger=function(e){logUpdate.clear(),externalLogger(e),activeProcesses.forEach(function(e){e.updateProgress()})},Process=function(e,o){var s=this,n=0,r=function(){n=o,c(),logUpdate.done(),activeProcesses.splice(activeProcesses.indexOf(s),1)},t=function(){return process.stdout.columns-1},c=function(){var s=t()*n/o,r=s?new Array(parseInt(s,10)).join(",").split(",").map(function(e){return"*"}).join(""):"*",c=parseInt(100*n/o,10);logUpdate("Running: "+e+" ("+c+"%)\n"+r)};return{start:function(){n=0,c()},updateProgress:function(e){(n=e||n)<o?c():r()},end:r}};maskLogs(),module.exports={newProcess:newProcess,maskLogs:maskLogs,unmaskLogs:unmaskLogs,log:newLogger};